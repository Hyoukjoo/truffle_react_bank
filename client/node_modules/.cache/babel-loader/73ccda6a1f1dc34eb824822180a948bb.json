{"ast":null,"code":"import _regeneratorRuntime from \"c:\\\\Users\\\\judam\\\\Documents\\\\HJ\\\\dev\\\\truffle_react\\\\client\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"c:\\\\Users\\\\judam\\\\Documents\\\\HJ\\\\dev\\\\truffle_react\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"c:\\\\Users\\\\judam\\\\Documents\\\\HJ\\\\dev\\\\truffle_react\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"c:\\\\Users\\\\judam\\\\Documents\\\\HJ\\\\dev\\\\truffle_react\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"c:\\\\Users\\\\judam\\\\Documents\\\\HJ\\\\dev\\\\truffle_react\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"c:\\\\Users\\\\judam\\\\Documents\\\\HJ\\\\dev\\\\truffle_react\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"c:\\\\Users\\\\judam\\\\Documents\\\\HJ\\\\dev\\\\truffle_react\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"c:\\\\Users\\\\judam\\\\Documents\\\\HJ\\\\dev\\\\truffle_react\\\\client\\\\src\\\\App.js\";\nimport React, { Component } from 'react';\nimport { Route, Switch, withRouter, Redirect } from 'react-router-dom';\nimport getWeb3 from './utils/getWeb3';\nimport truffleContract from 'truffle-contract';\nimport Bank from './contracts/Bank.json';\nimport IndexPage from './component/IndexPage';\nimport ListPage from './component/ListPage';\nimport InputMoney from './component/InputMoney';\nimport Submit from './component/Submit';\nimport Statement from './component/Statement';\nimport CheckPassword from './component/CheckPassword';\nimport Remit from './component/Remit';\nimport EnterMoney from './component/EnterMoney';\nimport \"./css/App.css\";\nimport { USERS } from './DB/DB';\nimport ViewTransactions from './component/ViewTransactions';\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      web3: null,\n      accounts: null,\n      contract: null,\n      userAddress: null\n    };\n    _this.componentDidMount =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var web3, accounts, Contract, instance;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return getWeb3();\n\n            case 3:\n              web3 = _context.sent;\n              _context.next = 6;\n              return web3.eth.getAccounts();\n\n            case 6:\n              accounts = _context.sent;\n              // Deploy Contract\n              Contract = truffleContract(Bank);\n              Contract.setProvider(web3.currentProvider);\n              _context.next = 11;\n              return Contract.deployed();\n\n            case 11:\n              instance = _context.sent;\n\n              // Set web3, accounts, contract in state\n              _this.setState({\n                web3: web3,\n                accounts: accounts,\n                contract: instance\n              }); //Clear localStorage\n\n\n              localStorage.clear();\n              _context.next = 20;\n              break;\n\n            case 16:\n              _context.prev = 16;\n              _context.t0 = _context[\"catch\"](0);\n              // Catch any errors for any of the above operations.\n              alert(\"Failed to load web3, accounts, or contract. Check console for details.\");\n              console.log(_context.t0);\n\n            case 20:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this, [[0, 16]]);\n    }));\n    _this._initUser =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      var Kane, Trout, Kershow, Johnson, userInfo, i, _userInfo$i, userBank, userName, userIndex, password, userAddress, balanceOf;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              Kane = USERS.get('0xCA2a5fB5C0D024c2dE66482883C8C3E1f7AdE001');\n              Trout = USERS.get('0x0A597b0FFF74f0c25Ca40463ec65ad4fe6796784');\n              Kershow = USERS.get('0xF26ac7a182428C2A5059cfB4Faf6b2C162e7bf34');\n              Johnson = USERS.get('0x01C9b80104ee4CFD48C065d18b9b10F220540446');\n              userInfo = [Kane, Trout, Kershow, Johnson];\n              i = 0;\n\n            case 6:\n              if (!(i < userInfo.length)) {\n                _context2.next = 14;\n                break;\n              }\n\n              _userInfo$i = userInfo[i], userBank = _userInfo$i.userBank, userName = _userInfo$i.userName, userIndex = _userInfo$i.userIndex, password = _userInfo$i.password, userAddress = _userInfo$i.userAddress, balanceOf = _userInfo$i.balanceOf;\n              console.log(\"App_initUser : \", userAddress);\n              _context2.next = 11;\n              return _this.state.contract.addUser(userBank, userName, userIndex, password, userAddress, balanceOf, {\n                from: _this.state.accounts[0]\n              });\n\n            case 11:\n              i++;\n              _context2.next = 6;\n              break;\n\n            case 14:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, this);\n    }));\n\n    _this._login =\n    /*#__PURE__*/\n    function () {\n      var _ref3 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(account) {\n        var _this$state, contract, accounts, userName, userAddress;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _this$state = _this.state, contract = _this$state.contract, accounts = _this$state.accounts;\n                _context3.prev = 1;\n                _context3.next = 4;\n                return contract.setUser(account, {\n                  from: accounts[0]\n                });\n\n              case 4:\n                _context3.next = 6;\n                return contract.getUser();\n\n              case 6:\n                userName = _context3.sent;\n                userAddress = account;\n\n                _this.setState({\n                  userAddress: userAddress\n                });\n\n                if (userName === '') {\n                  console.log(\"Input your address correctly\");\n\n                  _this.props.history.push('/');\n                } else {\n                  //set balance in localStorage\n                  localStorage.setItem('isLogin', \"true\");\n\n                  _this.props.history.push('/listpage');\n                }\n\n                _context3.next = 15;\n                break;\n\n              case 12:\n                _context3.prev = 12;\n                _context3.t0 = _context3[\"catch\"](1);\n                console.log(_context3.t0);\n\n              case 15:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[1, 12]]);\n      }));\n\n      return function (_x) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n\n    _this._logout =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee4() {\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return _this.state.contract.initUser({\n                from: _this.state.accounts[0]\n              });\n\n            case 2:\n              //Set the balance for null in state\n              _this.setState({\n                balance: 0,\n                userName: ''\n              }); //Clear localStorage\n\n\n              localStorage.clear();\n\n              _this.props.history.push('/');\n\n            case 5:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, this);\n    }));\n\n    _this._redirectLogin = function () {\n      console.log('고객 정보가 없습니다.');\n      return React.createElement(Redirect, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"render\",\n    value: function render() {\n      var _login = this._login,\n          _logout = this._logout,\n          _redirectLogin = this._redirectLogin,\n          _initUser = this._initUser,\n          state = this.state;\n\n      if (!this.state.web3) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129\n          },\n          __self: this\n        }, \"Loading Web3, accounts, and contract...\");\n      }\n\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(Switch, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(Route, {\n        exact: true,\n        path: \"/\",\n        render: function render() {\n          return React.createElement(IndexPage, {\n            info: state,\n            login: _login,\n            init: _initUser,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 135\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/listpage\",\n        render: function render() {\n          return React.createElement(ListPage, {\n            info: state,\n            logout: _logout,\n            redirect: _redirectLogin,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 138\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/inputmoney\",\n        render: function render() {\n          return React.createElement(InputMoney, {\n            logout: _logout,\n            redirect: _redirectLogin,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 141\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/checkpassword/:purpose\",\n        render: function render() {\n          return React.createElement(CheckPassword, {\n            info: state,\n            logout: _logout,\n            redirect: _redirectLogin,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 144\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/submit/:purpose\",\n        render: function render() {\n          return React.createElement(Submit, {\n            info: state,\n            logout: _logout,\n            redirect: _redirectLogin,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 147\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/statement/:purpose\",\n        render: function render() {\n          return React.createElement(Statement, {\n            contract: state.contract,\n            logout: _logout,\n            redirect: _redirectLogin,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 150\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/remit\",\n        render: function render() {\n          return React.createElement(Remit, {\n            info: state,\n            logout: _logout,\n            redirect: _redirectLogin,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 153\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/entermoney/:purpose\",\n        render: function render() {\n          return React.createElement(EnterMoney, {\n            logout: _logout,\n            redirect: _redirectLogin,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 156\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/viewtransactions\",\n        render: function render() {\n          return React.createElement(ViewTransactions, {\n            info: state,\n            redirect: _redirectLogin,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 159\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default withRouter(App);","map":{"version":3,"sources":["c:\\Users\\judam\\Documents\\HJ\\dev\\truffle_react\\client\\src\\App.js"],"names":["React","Component","Route","Switch","withRouter","Redirect","getWeb3","truffleContract","Bank","IndexPage","ListPage","InputMoney","Submit","Statement","CheckPassword","Remit","EnterMoney","USERS","ViewTransactions","App","state","web3","accounts","contract","userAddress","componentDidMount","eth","getAccounts","Contract","setProvider","currentProvider","deployed","instance","setState","localStorage","clear","alert","console","log","_initUser","Kane","get","Trout","Kershow","Johnson","userInfo","i","length","userBank","userName","userIndex","password","balanceOf","addUser","from","_login","account","setUser","getUser","props","history","push","setItem","_logout","initUser","balance","_redirectLogin"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Route, Switch, withRouter, Redirect } from 'react-router-dom'\n\nimport getWeb3 from './utils/getWeb3'\nimport truffleContract from 'truffle-contract'\nimport Bank from './contracts/Bank.json'\n\nimport IndexPage from './component/IndexPage'\nimport ListPage from './component/ListPage'\nimport InputMoney from './component/InputMoney'\nimport Submit from './component/Submit'\nimport Statement from './component/Statement'\nimport CheckPassword from './component/CheckPassword'\nimport Remit from './component/Remit'\nimport EnterMoney from './component/EnterMoney'\n\nimport \"./css/App.css\"\nimport{ USERS } from './DB/DB'\nimport ViewTransactions from './component/ViewTransactions';\n\nclass App extends Component {\n  state = { \n    web3: null, \n    accounts: null, \n    contract: null, \n    userAddress: null\n  }\n\n  componentDidMount = async () => {\n    try {\n      // Get network provider and web3 instance.\n      const web3 = await getWeb3()\n      \n      // Use web3 to get the user's accounts.\n      const accounts = await web3.eth.getAccounts()\n      \n      // Deploy Contract\n      const Contract = truffleContract(Bank)\n\n      Contract.setProvider(web3.currentProvider)\n\n      const instance = await Contract.deployed()\n      \n      // Set web3, accounts, contract in state\n      this.setState({ web3, accounts, contract : instance })\n      \n      //Clear localStorage\n      localStorage.clear()\n    } catch (error) {\n      // Catch any errors for any of the above operations.\n      alert(\n        `Failed to load web3, accounts, or contract. Check console for details.`\n        )\n        console.log(error)\n    }\n\n    //Set initial user informations in the contract\n    // this._addUser()\n  }\n    \n  //Add user informations in the contract\n  _initUser = async () => {  \n    const Kane = USERS.get('0xCA2a5fB5C0D024c2dE66482883C8C3E1f7AdE001')\n    const Trout = USERS.get('0x0A597b0FFF74f0c25Ca40463ec65ad4fe6796784')\n    const Kershow = USERS.get('0xF26ac7a182428C2A5059cfB4Faf6b2C162e7bf34')\n    const Johnson = USERS.get('0x01C9b80104ee4CFD48C065d18b9b10F220540446')\n\n    const userInfo = [ Kane, Trout, Kershow, Johnson ]\n\n    for(let i=0; i<userInfo.length; i++){\n      const {userBank, userName, userIndex, password, userAddress, balanceOf} = userInfo[i]\n      \n      console.log(\"App_initUser : \", userAddress)\n      \n      await this.state.contract.addUser(userBank, userName, userIndex, password, userAddress, balanceOf, { from: this.state.accounts[0] })\n    }\n  }\n  \n  _login = async account => {\n    const { contract, accounts } = this.state\n\n    try{\n      //Set user in the contract\n      await contract.setUser(account, { from : accounts[0] })\n\n      const userName = await contract.getUser()\n\n      const userAddress = account\n\n      this.setState({ userAddress })\n\n      if(userName === '') {\n        console.log(\"Input your address correctly\")\n\n        this.props.history.push('/')\n      } else {\n        //set balance in localStorage\n        localStorage.setItem('isLogin', \"true\")\n  \n        this.props.history.push('/listpage')\n      }\n    } catch(error) {\n      console.log(error);\n    }\n  }\n\n  _logout = async () => {\n    //Initialize user in the contract\n    await this.state.contract.initUser({ from : this.state.accounts[0] })\n\n    //Set the balance for null in state\n    this.setState({ balance : 0, userName : ''})\n\n    //Clear localStorage\n    localStorage.clear()\n\n    this.props.history.push('/')\n  }\n\n  _redirectLogin = () => {\n    console.log('고객 정보가 없습니다.')\n    return <Redirect to='/' />\n  }\n\n  render() {\n    const {_login, _logout, _redirectLogin, _initUser, state} = this\n\n    if (!this.state.web3) {\n      return <div>Loading Web3, accounts, and contract...</div>\n    }\n    return (\n      <div className=\"App\">\n        <Switch>\n          <Route exact path='/'\n            render={() => (<IndexPage info={state} login={_login} init={_initUser} />)}\n          />\n          <Route path=\"/listpage\" \n            render={() => (<ListPage info={state} logout={_logout} redirect={_redirectLogin} />)} \n          />\n          <Route path='/inputmoney' \n            render={() => (<InputMoney logout={_logout} redirect={_redirectLogin} />)} \n          />\n          <Route path='/checkpassword/:purpose'\n            render={()=> (<CheckPassword info={state} logout={_logout} redirect={_redirectLogin} />)} \n          />\n          <Route path='/submit/:purpose' \n            render={() => (<Submit info={state} logout={_logout} redirect={_redirectLogin} />)} \n          />\n          <Route path='/statement/:purpose' \n            render={() => (<Statement contract={state.contract} logout={_logout} redirect={_redirectLogin} />)} \n          />\n          <Route path='/remit' \n            render={() => (<Remit info={state} logout={_logout} redirect={_redirectLogin} />)} \n          />\n          <Route path='/entermoney/:purpose' \n            render={() => (<EnterMoney logout={_logout} redirect={_redirectLogin} />)} \n          />\n          <Route path='/viewtransactions'\n            render={() => (<ViewTransactions info={state} redirect={_redirectLogin} />)}\n          />\n        </Switch>\n      </div>\n    )\n  }\n} \n\nexport default withRouter(App)\n"]},"metadata":{},"sourceType":"module"}