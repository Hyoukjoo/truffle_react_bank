{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\judam\\\\Documents\\\\HJ\\\\dev\\\\truffle_react\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\judam\\\\Documents\\\\HJ\\\\dev\\\\truffle_react\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\judam\\\\Documents\\\\HJ\\\\dev\\\\truffle_react\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\judam\\\\Documents\\\\HJ\\\\dev\\\\truffle_react\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\judam\\\\Documents\\\\HJ\\\\dev\\\\truffle_react\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\judam\\\\Documents\\\\HJ\\\\dev\\\\truffle_react\\\\client\\\\src\\\\component\\\\ViewTransactions.js\";\nimport React, { Component, Fragment } from 'react';\nimport { withRouter, Redirect } from 'react-router-dom';\nimport { getTransaction } from '../DB/DB';\nimport '../css/ViewTransactions.css';\n\nvar ViewTransactions =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ViewTransactions, _Component);\n\n  function ViewTransactions(props) {\n    var _this;\n\n    _classCallCheck(this, ViewTransactions);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ViewTransactions).call(this, props));\n\n    _this.showPage = function () {\n      var _this$state = _this.state,\n          transaction = _this$state.transaction,\n          pageNumber = _this$state.pageNumber;\n      var showNumber = pageNumber;\n      var showTransactions = [];\n\n      for (var i = pageNumber; i < showNumber + 3; i++) {\n        showTransactions.push(transaction[i]);\n      }\n\n      console.log(showTransactions);\n      return showTransactions;\n    };\n\n    _this.pageButton = function (arrow) {\n      var _this$state2 = _this.state,\n          pageNumber = _this$state2.pageNumber,\n          transaction = _this$state2.transaction;\n\n      if (arrow === 'up') {\n        if (pageNumber < transaction.length) console.log('거래내역이 더 존재하지 않습니다.');else {\n          pageNumber += 3;\n\n          _this.setState({\n            pageNumber: pageNumber\n          });\n        }\n      } else if (arrow === 'down') {\n        if (pageNumber - 3 < 0) console.log('첫 거래내역입니다.');else {\n          pageNumber -= 3;\n\n          _this.setState({\n            pageNumber: pageNumber\n          });\n        }\n      }\n    };\n\n    var userAddress = props.info.userAddress;\n    var _transaction = null;\n\n    if (userAddress !== null) {\n      _transaction = getTransaction(userAddress);\n    } else {\n      props.history.push('/');\n    }\n\n    _this.state = {\n      pageNumber: 0,\n      transaction: _transaction\n    };\n    return _this;\n  }\n\n  _createClass(ViewTransactions, [{\n    key: \"render\",\n    value: function render() {\n      var userAddress = this.props.info.userAddress;\n      var logout = this.props.logout;\n      var showPage = this.showPage,\n          pageButton = this.pageButton;\n      console.log(this.state.transaction);\n      var transactions = undefined;\n\n      if (userAddress === null) {\n        console.log('고객 정보가 없습니다.');\n        return React.createElement(Redirect, {\n          to: \"/\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        });\n      } else {\n        transactions = showPage();\n      }\n\n      return React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(\"table\", {\n        className: \"transactionTable\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(\"caption\", {\n        className: \"tableTitle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, \"\\uAC70\\uB798 \\uB0B4\\uC5ED\"), React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, \"\\uB0A0\\uC9DC\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, \"\\uB0B4\\uC6A9\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, \"\\uCD9C\\uAE08\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, \"\\uC785\\uAE08\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, \"\\uC794\\uC561\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, transactions.map(function (transaction, index) {\n        var purpose = transaction.purpose,\n            date = transaction.date,\n            balance = transaction.balance,\n            amount = transaction.amount,\n            receiverAddress = transaction.receiverAddress;\n        var splitedDate = date.split(' ')[0].split('.');\n        var inThousandsAmount = amount.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n        var inThousandsBalance = balance.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n        return React.createElement(Fragment, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        }, React.createElement(\"tr\", {\n          key: index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }, \"\".concat(splitedDate[1], \"/\").concat(splitedDate[2])), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95\n          },\n          __self: this\n        }, purpose), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96\n          },\n          __self: this\n        }, purpose === '입금' && 0, purpose === '출금' && inThousandsAmount, purpose === '송금' && userAddress === receiverAddress && 0, purpose === '송금' && userAddress !== receiverAddress && inThousandsAmount), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102\n          },\n          __self: this\n        }, purpose === '입금' && inThousandsAmount, purpose === '출금' && 0, purpose === '송금' && userAddress === receiverAddress && inThousandsAmount, purpose === '송금' && userAddress !== receiverAddress && 0), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        }, inThousandsBalance)));\n      }))), React.createElement(\"div\", {\n        className: \"submitDiv\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"pageButton\",\n        onClick: pageButton('up'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, \"\\u25B3\"), React.createElement(\"div\", {\n        className: \"submitButton confirmButton\",\n        onClick: logout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, \"\\uD655 \\uC778\")), React.createElement(\"div\", {\n        className: \"pageButton\",\n        onClick: pageButton('down'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, \"\\u25BD\")));\n    }\n  }]);\n\n  return ViewTransactions;\n}(Component);\n\nexport default withRouter(ViewTransactions);","map":{"version":3,"sources":["C:\\Users\\judam\\Documents\\HJ\\dev\\truffle_react\\client\\src\\component\\ViewTransactions.js"],"names":["React","Component","Fragment","withRouter","Redirect","getTransaction","ViewTransactions","props","showPage","state","transaction","pageNumber","showNumber","showTransactions","i","push","console","log","pageButton","arrow","length","setState","userAddress","info","history","logout","transactions","undefined","map","index","purpose","date","balance","amount","receiverAddress","splitedDate","split","inThousandsAmount","toString","replace","inThousandsBalance"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react'\r\nimport { withRouter, Redirect } from 'react-router-dom'\r\n\r\nimport { getTransaction } from '../DB/DB'\r\nimport '../css/ViewTransactions.css'\r\n\r\nclass ViewTransactions extends Component {\r\n  constructor(props){\r\n    super(props)\r\n    \r\n    const { userAddress } = props.info\r\n    let transaction = null\r\n\r\n    if(userAddress !== null) {\r\n      transaction = getTransaction(userAddress)\r\n    } else {\r\n      props.history.push('/')\r\n    }\r\n\r\n    this.state = { pageNumber : 0, transaction }\r\n  }\r\n\r\n  showPage = () => {\r\n    const { transaction, pageNumber } = this.state\r\n    const showNumber = pageNumber\r\n    let showTransactions = []\r\n\r\n    for(let i = pageNumber; i < showNumber + 3; i++){\r\n      showTransactions.push(transaction[i])\r\n    }\r\n\r\n    console.log(showTransactions)\r\n\r\n    return showTransactions\r\n  }\r\n\r\n  pageButton = arrow => {\r\n    let { pageNumber, transaction } = this.state\r\n\r\n    if(arrow === 'up'){\r\n      if(pageNumber < transaction.length) console.log('거래내역이 더 존재하지 않습니다.')\r\n      else {\r\n        pageNumber += 3\r\n        this.setState({ pageNumber })\r\n      }\r\n    }else if(arrow === 'down'){\r\n      if(pageNumber - 3 < 0) console.log('첫 거래내역입니다.')\r\n      else {\r\n        pageNumber -= 3\r\n        this.setState({ pageNumber })\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { userAddress } = this.props.info\r\n    const { logout } = this.props\r\n    const { showPage, pageButton } = this\r\n\r\n    console.log(this.state.transaction)\r\n\r\n    let transactions = undefined\r\n\r\n    if(userAddress === null) {\r\n      console.log('고객 정보가 없습니다.')\r\n      return <Redirect to='/' />\r\n    } else {\r\n      transactions = showPage()\r\n    }\r\n\r\n    return (\r\n      <Fragment>\r\n        <table className='transactionTable'>\r\n          <caption className='tableTitle'>거래 내역</caption>\r\n          <thead>\r\n            <tr>\r\n              <th>날짜</th>\r\n              <th>내용</th>\r\n              <th>출금</th>\r\n              <th>입금</th>\r\n              <th>잔액</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n          {transactions.map((transaction, index) => {\r\n            const { purpose, date, balance, amount, receiverAddress } = transaction\r\n            const splitedDate = date.split(' ')[0].split('.')\r\n            const inThousandsAmount = amount.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")\r\n            const inThousandsBalance = balance.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")\r\n\r\n            return (\r\n              <Fragment>\r\n                <tr key={index}>\r\n                  <td>{`${splitedDate[1]}/${splitedDate[2]}`}</td>\r\n                  <td>{purpose}</td>\r\n                  <td>\r\n                    {purpose === '입금' && 0}\r\n                    {purpose === '출금' && inThousandsAmount}\r\n                    {(purpose === '송금' && userAddress === receiverAddress) && 0}\r\n                    {(purpose === '송금' && userAddress !== receiverAddress) && inThousandsAmount}\r\n                  </td>\r\n                  <td>\r\n                    {purpose === '입금' && inThousandsAmount}\r\n                    {purpose === '출금' && 0}\r\n                    {(purpose === '송금' && userAddress === receiverAddress) && inThousandsAmount}\r\n                    {(purpose === '송금' && userAddress !== receiverAddress) && 0}\r\n                  </td>\r\n                  <td>{inThousandsBalance}</td>\r\n                </tr>\r\n              </Fragment>\r\n            )\r\n          })}\r\n          </tbody>\r\n        </table>\r\n        <div className=\"submitDiv\">\r\n          <div className='pageButton' onClick={pageButton('up')}>△</div>\r\n          <div className=\"submitButton confirmButton\" onClick={logout}>\r\n            <span>확 인</span>\r\n          </div>\r\n          <div className='pageButton' onClick={pageButton('down')}>▽</div>\r\n        </div>\r\n      </Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(ViewTransactions)"]},"metadata":{},"sourceType":"module"}